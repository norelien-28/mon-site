<!DOCTYPE html>
<html lang="fr">
	<head>
		<meta charset="UTF-8" />
		<title>Astuces Dev</title>
		<link rel="stylesheet" href="assets/styles.css" />
		<link rel="stylesheet" href="assets/styles.css" />
		<link rel="apple-touch-icon" sizes="180x180" href="assets/img/favicon/apple-touch-icon.png" />
		<link rel="icon" type="image/png" sizes="32x32" href="assets/img/favicon/favicon-32x32.png" />
		<link rel="icon" type="image/png" sizes="16x16" href="assets/img/favicon/favicon-16x16.png" />
		<link rel="manifest" href="/site.webmanifest" />
	</head>
	<body>
		<div id="header"></div>

		<main id="content">
			<p>Chargement...</p>
		</main>

		<div id="footer"></div>

		<script>
			// Charger le header et footer
			fetch("header.html")
				.then((r) => r.text())
				.then((html) => (header.innerHTML = html));
			fetch("footer.html")
				.then((r) => r.text())
				.then((html) => (footer.innerHTML = html));

			// Lire l’URL: ?cat=html&page=intro
			const params = new URLSearchParams(window.location.search);
			const cat = params.get("cat");
			const page = params.get("page");

			// Si pas de page, afficher un accueil par défaut
			if (!cat || !page) {
				document.getElementById("content").innerHTML = `<h1>Bienvenue !</h1><p>Choisissez une catégorie d'astuces ci-dessus.</p>`;
			} else {
				const path = `categories/${cat}/${page}.html`;
				fetch(path)
					.then((r) => {
						if (!r.ok) throw new Error("Page introuvable");
						return r.text();
					})
					.then((html) => (content.innerHTML = html))
					.catch(() => (content.innerHTML = `<p>❌ Cette astuce n'existe pas.</p>`));
			}
		</script>
	</body>
</html>
